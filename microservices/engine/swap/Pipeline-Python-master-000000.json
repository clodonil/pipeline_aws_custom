{
    "Parameters": {
        "DevAccount": {
            "Default": "/Accounts/Dev",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "DevSecOpsAccount": {
            "Default": "/Accounts/DevSecOps",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "DevToolsAccount": {
            "Default": "/Accounts/DevTools",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "HomologAccount": {
            "Default": "/Accounts/Homolog",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "KMSKeyArn": {
            "Default": "/Shared/KMSKeyArn",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "PrivateSubnetOne": {
            "Default": "/Networking/PrivateSubnetOne",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "PrivateSubnetTwo": {
            "Default": "/Networking/PrivateSubnetTwo",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "ProdAccount": {
            "Default": "/Accounts/Prod",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "TokenAqua": {
            "Default": "/Shared/TokenAqua",
            "Type": "AWS::SSM::Parameter::Value<String>"
        },
        "VPCID": {
            "Default": "/Networking/VPCID",
            "Type": "AWS::SSM::Parameter::Value<String>"
        }
    },
    "Resources": {
        "Aqua": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "BranchName",
                            "Value": "master"
                        },
                        {
                            "Name": "VariablePath",
                            "Value": "/App/Pipeline/Python/"
                        },
                        {
                            "Name": "AccountID",
                            "Value": "!Sub ${AWS::AccountId}"
                        },
                        {
                            "Name": "s3bucket",
                            "Value": "!Sub ${AWS::AccountId}-reports"
                        },
                        {
                            "Name": "queue",
                            "Value": "https://sqs.sa-east-1.amazonaws.com/049557819541/DevSecOps-ToolsReports"
                        },
                        {
                            "Name": "microservicename",
                            "Value": "Python"
                        },
                        {
                            "Name": "featurename",
                            "Value": "Pipeline"
                        }
                    ],
                    "Image": "imagem_Aqua",
                    "ImagePullCredentialsType": "SERVICE_ROLE",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-aqua-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/container-security/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "AuditApp": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "PIPELINETYPE",
                            "Value": "master"
                        }
                    ],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-auditapp-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/audit/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "Build": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "DevSecOpsAccount",
                            "Value": "!Ref DevSecOpsAccount"
                        }
                    ],
                    "Image": "image_Build",
                    "ImagePullCredentialsType": "SERVICE_ROLE",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-build-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "../01/python/3.7/build/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "Controlversion": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "QUEUE",
                            "Value": "https://sqs.sa-east-1.amazonaws.com/049557819541/codemetrics"
                        },
                        {
                            "Name": "RUNTIME",
                            "Value": "python:3.7"
                        },
                        {
                            "Name": "PIPELINETYPE",
                            "Value": "python:3.7"
                        },
                        {
                            "Name": "VERSION",
                            "Value": "Wasabi-beta01"
                        }
                    ],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-controlversion-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/controlversion/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "Deployecshomol": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-deployecs-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/deploy/buildspec_ecs.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "Fortify": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "BranchName",
                            "Value": "master"
                        },
                        {
                            "Name": "VariablePath",
                            "Value": "/App/Pipeline/Python/"
                        },
                        {
                            "Name": "AccountID",
                            "Value": "!Sub ${AWS::AccountId}"
                        },
                        {
                            "Name": "s3bucket",
                            "Value": "!Sub ${AWS::AccountId}-reports"
                        },
                        {
                            "Name": "queue",
                            "Value": "https://sqs.sa-east-1.amazonaws.com/049557819541/DevSecOps-ToolsReports"
                        },
                        {
                            "Name": "microservicename",
                            "Value": "Python"
                        },
                        {
                            "Name": "featurename",
                            "Value": "Pipeline"
                        }
                    ],
                    "Image": "imagem_sast",
                    "ImagePullCredentialsType": "SERVICE_ROLE",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-fortify-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "../01/python/3.7/sast/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "ParametersApp": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "MicroServiceName",
                            "Value": "Python"
                        },
                        {
                            "Name": "FeatureName",
                            "Value": "Pipeline"
                        }
                    ],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-parametersapp-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/EnvParameters/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "PipelinePythonMaster": {
            "Properties": {
                "ArtifactStore": {
                    "EncryptionKey": {
                        "Id": {
                            "Ref": "KMSKeyArn"
                        },
                        "Type": "KMS"
                    },
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-artefatos"
                    },
                    "Type": "S3"
                },
                "Name": "Pipeline-Python-master",
                "RoleArn": "arn:aws:iam::033921349789:role/RoleCodepipelineRole",
                "Stages": [
                    {
                        "Actions": [
                            {
                                "ActionTypeId": {
                                    "Category": "Source",
                                    "Owner": "AWS",
                                    "Provider": "CodeCommit",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "BranchName": "release-10",
                                    "PollForSourceChanges": "false",
                                    "RepositoryName": "pipelineaws-sharedlibrary"
                                },
                                "Name": "SharedLibrary",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "RoleArn": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                                "RunOrder": "1"
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Source",
                                    "Owner": "AWS",
                                    "Provider": "CodeCommit",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "BranchName": "master",
                                    "RepositoryName": "Pipeline-Python"
                                },
                                "Name": "Pipeline-Python",
                                "OutputArtifacts": [
                                    {
                                        "Name": "App"
                                    }
                                ],
                                "RunOrder": "1"
                            }
                        ],
                        "Name": "Source"
                    },
                    {
                        "Actions": [
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "Libs",
                                    "ProjectName": "pipeline-python-controlversion-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Controlversion",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Controlversion"
                                    }
                                ],
                                "RunOrder": 1
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-fortify-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Fortify",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Fortify"
                                    }
                                ],
                                "RunOrder": 2
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-sonar-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Sonar",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Sonar"
                                    }
                                ],
                                "RunOrder": 2
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-testunit-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Testunit",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Testunit"
                                    }
                                ],
                                "RunOrder": 2
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-build-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Build",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Build"
                                    }
                                ],
                                "RunOrder": 2
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-aqua-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Aqua",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Aqua"
                                    }
                                ],
                                "RunOrder": 3
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "Libs",
                                    "ProjectName": "pipeline-python-auditapp-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Auditapp",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Auditapp"
                                    }
                                ],
                                "RunOrder": 3
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "Libs",
                                    "ProjectName": "pipeline-python-parametersapp-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    },
                                    {
                                        "Name": "Libs"
                                    }
                                ],
                                "Name": "Parametersapp",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Parametersapp"
                                    }
                                ],
                                "RunOrder": 3
                            }
                        ],
                        "Name": "Continuous_Integration"
                    },
                    {
                        "Actions": [
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-publishecr-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    }
                                ],
                                "Name": "Publishecrhomol",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Publishecrhomol"
                                    }
                                ],
                                "RunOrder": 1
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-deployecs-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    }
                                ],
                                "Name": "Deployecshomol",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Deployecshomol"
                                    }
                                ],
                                "RunOrder": 2
                            }
                        ],
                        "Name": "DeployHomol"
                    },
                    {
                        "Actions": [],
                        "Name": "Test"
                    },
                    {
                        "Actions": [
                            {
                                "ActionTypeId": {
                                    "Category": "Approval",
                                    "Owner": "AWS",
                                    "Provider": "Manual",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "CustomData": "Voc\u00ea aprova a entrada desta vers\u00e3o em produ\u00e7\u00e3o?",
                                    "NotificationArn": "!Ref CodePipelinePOSNSTopic"
                                },
                                "Name": "Aprovacaopo",
                                "RunOrder": 1
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Approval",
                                    "Owner": "AWS",
                                    "Provider": "Manual",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "CustomData": "Voc\u00ea aprova a entrada desta vers\u00e3o em produ\u00e7\u00e3o?",
                                    "NotificationArn": "!Ref CodePipelinePOSNSTopic"
                                },
                                "Name": "Aprovacaobo",
                                "RunOrder": 1
                            }
                        ],
                        "Name": "Aprovacao"
                    },
                    {
                        "Actions": [],
                        "Name": "Agendamento"
                    },
                    {
                        "Actions": [
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-publishecr-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    }
                                ],
                                "Name": "Publishecrhomol",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Publishecrhomol"
                                    }
                                ],
                                "RunOrder": 1
                            },
                            {
                                "ActionTypeId": {
                                    "Category": "Build",
                                    "Owner": "AWS",
                                    "Provider": "CodeBuild",
                                    "Version": "1"
                                },
                                "Configuration": {
                                    "PrimarySource": "App",
                                    "ProjectName": "pipeline-python-deployecs-master"
                                },
                                "InputArtifacts": [
                                    {
                                        "Name": "App"
                                    }
                                ],
                                "Name": "Deployecshomol",
                                "OutputArtifacts": [
                                    {
                                        "Name": "Deployecshomol"
                                    }
                                ],
                                "RunOrder": 2
                            }
                        ],
                        "Name": "DeployProd"
                    }
                ]
            },
            "Type": "AWS::CodePipeline::Pipeline"
        },
        "Publishecrhomol": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-publishecr-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "common/publish/buildspec_ecr.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "SG": {
            "Properties": {
                "GroupDescription": "This security group is used to control access to the container",
                "GroupName": "Pipeline-Python-master",
                "SecurityGroupIngress": [
                    {
                        "CidrIp": "0.0.0.0/0",
                        "FromPort": 0,
                        "IpProtocol": "TCP",
                        "ToPort": 65535
                    }
                ],
                "VpcId": {
                    "Ref": "VPCID"
                }
            },
            "Type": "AWS::EC2::SecurityGroup"
        },
        "Sonar": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "BranchName",
                            "Value": "master"
                        },
                        {
                            "Name": "s3bucket",
                            "Value": "!Sub ${AWS::AccountId}-reports"
                        },
                        {
                            "Name": "microservicename",
                            "Value": "Python"
                        },
                        {
                            "Name": "featurename",
                            "Value": "Pipeline"
                        }
                    ],
                    "Image": "imagem_sonar",
                    "ImagePullCredentialsType": "SERVICE_ROLE",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-sonar-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "../01/python/3.7/sonarqube/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        },
        "Testunit": {
            "Properties": {
                "Artifacts": {
                    "Type": "CODEPIPELINE"
                },
                "Cache": {
                    "Location": {
                        "Fn::Sub": "${AWS::AccountId}-cache"
                    },
                    "Modes": [
                        "LOCAL_CUSTOM_CACHE"
                    ],
                    "Type": "S3"
                },
                "EncryptionKey": {
                    "Ref": "KMSKeyArn"
                },
                "Environment": {
                    "ComputeType": "BUILD_GENERAL1_SMALL",
                    "EnvironmentVariables": [
                        {
                            "Name": "DevSecOpsAccount",
                            "Value": "!Ref DevSecOpsAccount"
                        }
                    ],
                    "Image": "aws/codebuild/standard:2.0",
                    "ImagePullCredentialsType": "CODEBUILD",
                    "PrivilegedMode": "true",
                    "Type": "LINUX_CONTAINER"
                },
                "Name": "pipeline-python-testunit-master",
                "ServiceRole": "arn:aws:iam::033921349789:role/RoleCodeBuildRole",
                "Source": {
                    "BuildSpec": "../01/python/3.7/testunit/buildspec.yml",
                    "Type": "CODEPIPELINE"
                },
                "TimeoutInMinutes": 10,
                "VpcConfig": {
                    "SecurityGroupIds": [
                        {
                            "Ref": "SG"
                        }
                    ],
                    "Subnets": [
                        {
                            "Ref": "PrivateSubnetOne"
                        },
                        {
                            "Ref": "PrivateSubnetTwo"
                        }
                    ],
                    "VpcId": {
                        "Ref": "VPCID"
                    }
                }
            },
            "Type": "AWS::CodeBuild::Project"
        }
    }
}